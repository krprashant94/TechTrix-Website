var cities=["Bhandup","Mumbai","Visakhapatnam","Coimbatore","Delhi","Bangalore","Pune","Nagpur","Lucknow","Vadodara","Indore","Jalalpur","Bhopal","Kolkata","Kanpur","New Delhi","Faridabad","Rajkot","Ghaziabad","Chennai","Meerut","Agra","Jaipur","Jabalpur","Varanasi","Allahabad","Hyderabad","Noida","Howrah","Thane","Patiala","Chakan","Ahmedabad","Manipala","Mangalore","Panvel","Udupi","Rishikesh","Gurgaon","Mathura","Shahjahanpur","Bagpat","Sriperumbudur","Chandigarh","Ludhiana","Palakkad","Kalyan","Valsad","Ulhasnagar","Bhiwani","Shimla","Dehradun","Patna","Unnao","Tiruvallur","Kanchipuram","Jamshedpur","Gwalior","Karur","Erode","Gorakhpur","Ooty","Haldwani","Bikaner","Puducherry","Nalbari","Bellary","Vellore","Naraina","Mandi","Rupnagar","Jodhpur","Roorkee","Aligarh","Indraprast","Karnal","Tanda","Amritsar","Raipur","Pilani","Bilaspur","Srinagar","Guntur","Kakinada","Warangal","Tirumala - Tirupati","Nizamabad","Kadapa","Kuppam","Anantpur","Nalgonda","Potti","Nellore","Rajahmundry","Bagalkot","Kurnool","Secunderabad","Mahatma","Bharuch","Miraj","Nanded","Anand","Gandhinagar","Bhavnagar","Morvi","Aurangabad","Modasa","Patan","Solapur","Kolhapur","Junagadh","Akola","Bhuj","Karad","Jalgaon Jamod","Chandrapur","Maharaj","Dhule","Ponda","Dahod","Navsari","Panjim","Patel","Nashik","Amravati","Somnath","Ganpat","Karwar","Davangere","Raichur","Nagara","Kushalnagar","Hassan","Hubli","Bidar","Belgaum","Mysore","Dharwad","Kolar","TumkÅ«r","Tiruchi","Thiruvananthapuram","Kozhikode","Thrissur","Madurai","Thalassery","Kannur","Karaikudi","Thanjavur","Manor","Idukki","Thiruvarur","Alappuzha","Gandhigram","Kochi","Annamalainagar","Amet","Kottarakara","Kottayam","Tirunelveli","Mohan","Salem","Attingal","Chitra","Chengannur","Guwahati","Kalam","Ranchi","Shillong","Gangtok","Srikakulam","Tezpur","Bhubaneswar","Imphal","Sundargarh","Arunachal","Manipur","Bihar Sharif","Mandal","Dibrugarh","Darbhanga","Gaya","Bhagalpur","Kunwar","Barddhaman","Jadabpur","Kalyani","Cuttack","Barpeta","Jorhat","Kharagpur","Medinipur","Agartala","Saranga","Machilipatnam","Dhanbad","Silchar","Dumka","Kokrajhar","Bankura","Jalpaiguri","Durgapur","Kalinga","Palampur","Jammu","Dwarka","Faridkot","Udaipur","Raigarh","Hisar","Solan","Ajmer","Lala","Gurdaspur","Sultanpur","Jhansi","Vidisha","Jagdalpur","Dipas","Sawi","Etawah","Saharanpur","Ujjain","Kangra","Bhilai","Rohtak","Haryana","Ambala","Bareilly","Bhoj","Kapurthala Town","Sangrur","Pusa","Sagar","Rewa","Bhawan","Rampur","Bhadohi","Cuddalore","Khopoli","Bali","Bhiwandi","Vasai","Badlapur","Sambalpur","Raurkela","Brahmapur","Visnagar","Surendranagar","Ankleshwar","Dahanu","Silvassa","Jamnagar","Dhansura","Muzaffarpur","Wardha","Bodhan","Parappanangadi","Malappuram","Vizianagaram","Mavelikara","Pathanamthitta","Satara","Janjgir","Gold","Himatnagar","Bodinayakkanur","Gandhidham","Mahabalipuram","Nadiad","Virar","Bahadurgarh","Kaithal","Siliguri","Tiruppur","Ernakulam","Jalandhar","Barakpur","Kavaratti","Ratnagiri","Moga","Hansi","Sonipat","Bandra","Aizawl","Itanagar","Nagar","Ghatkopar","Chen","Powai","Bhimavaram","Bhongir","Medak","Karimnagar","Narsapur","Vijayawada","Markapur","Mancherial","Sangli","Moradabad","Alipur","Ichalkaranji","Devgarh","Yavatmal","Hinganghat","Madgaon","Verna","Katra","Bilaspur","Uttarkashi","Muktsar","Bhatinda","Pathankot","Khatauli","Vikasnagar","Kollam","Kovilpatti","Kovvur","Paloncha","Vasco","Alwar","Bijapur","Tinsukia","Ratlam","Kalka","Ladwa","Rajpura","Batala","Hoshiarpur","Katni","Bhilwara","Jhajjar","Lohaghat","Mohali","Dhuri","Thoothukudi","Sivakasi","Coonoor","Shimoga","Kayamkulam","Namakkal","Dharmapuri","Aluva","Antapur","Tanuku","Eluru","Balasore","Hingoli","Quepem","Assagao","Betim","Cuncolim","Ahmednagar","Goa","Caranzalem","Chopda","Petlad","Raipur","Villupuram","Shoranur","Dasua","Gonda","Yadgir","Palladam","Nuzvid","Kasaragod","Paonta Sahib","Sarangi","Anantapur","Kumar","Kaul","Panipat","Uppal","Teri","Tiruvalla","Jamal","Chakra","Narasaraopet","Dharamsala","Ranjan","Garhshankar","Haridwar","Chinchvad","Narela","Aurangabad","Sion","Kalamboli","Chittoor","Wellington","Nagapattinam","Karaikal","Pollachi","Thenkasi","Aranmula","Koni","Ariyalur","Ranippettai","Kundan","Lamba Harisingh","Surana","Ghana","Lanka","Kataria","Kotian","Khan","Salt Lake City","Bala","Vazhakulam","Paravur","Nabha","Ongole","Kaladi","Jajpur","Thenali","Mohala","Mylapore","Bank","Khammam","Ring","Maldah","Kavali","Andheri","Baddi","Mahesana","Nila","Gannavaram","Cumbum","Belapur","Phagwara","Rander","Siuri","Bulandshahr","Bilimora","Guindy","Pitampura","Baharampur","Dadri","Boisar","Shiv","Multi","Bhadath","Ulubari","Palghar","Puras","Sikka","Saha","Godhra","Dam Dam","Ekkattuthangal","Sahibabad","Kalol","Bardoli","Wai","Shirgaon","Nehra","Mangalagiri","Latur","Kottakkal","Rewari","Ponnani","Narayangaon","Hapur","Kalpetta","Khurja","Ramnagar","Neral","Sendhwa","Talegaon Dabhade","Kargil","Manali","Jalalabad","Palani","Sirkazhi","Krishnagiri","Hiriyur","Muzaffarnagar","Kashipur","Gampalagudem","Siruseri","Manjeri","Raniganj","Mahim","Bhusawal","Tirur","Sattur","Angul","Puri","Khurda","Dharavi","Ambur","Vashi","Arch","Colaba","Hosur","Kota","Hugli","Anantnag","Murshidabad","Jharsuguda","Jind","Neyveli","Vaniyambadi","Srikalahasti","Liluah","Pali","Bokaro","Sidhi","Asansol","Darjeeling","Kohima","Shahdara","Chandannagar","Nadgaon","Haripad","Sitapur","Vapi","Bambolim","Baidyabati","Connaught Place","Singtam","Shyamnagar","Sikar","Choolai","Mayapur","Puruliya","Habra","Kanchrapara","Goregaon","Tiptur","Kalpakkam","Serampore","Konnagar","Port Blair","Canning","Mahad","Alibag","Pimpri","Panchgani","Karjat","Vaikam","Mhow","Lakhimpur","Madhoganj","Kheri","Gudivada","Avanigadda","Nayagarh","Bemetara","Bhatapara","Ramgarh","Dhubri","Goshaingaon","Bellare","Puttur","Narnaul","Porbandar","Keshod","Dhrol","Kailaras","Morena","Deolali","Banda","Orai","Fatehpur","Mirzapur","Adilabad","Pithapuram","Ramavaram","Amalapuram","Champa","Ambikapur","Korba","Pehowa","Yamunanagar","Shahabad","Hamirpur","Gulbarga","Sagar","Bhadravati","Sirsi","Honavar","Siruguppa","Koppal","Gargoti","Kankauli","Jalna","Parbhani","Koraput","Barpali","Jaypur","Banswara","Tindivanam","Mettur","Srirangam","Deoria","Basti","Padrauna","Budaun","Bolpur","Gujrat","Balurghat","Binnaguri","Guruvayur","Chandauli","Madikeri","Piduguralla","Vinukonda","Berasia","Sultans Battery","Ramanagaram","Angadipuram","Mattanur","Gobichettipalayam","Banga","Sibsagar","Namrup","North Lakhimpur","Dhenkanal","Karanja","Cheyyar","Vandavasi","Arakkonam","Tiruvannamalai","Akividu","Tadepallegudem","Madanapalle","Puttur","Edavanna","Kodungallur","Marmagao","Sanquelim","Sakri","Shahdol","Satna","Thasra","Bundi","Kishangarh","Firozpur","Kot Isa Khan","Barnala","Sunam","Pithoragarh","Jaspur","Jhargram","Dimapur","Churachandpur","Raxaul","Motihari","Munger","Purnea","Mannargudi","Kumbakonam","Eral","Nagercoil","Kanniyakumari","Ramanathapuram","Sivaganga","Rajapalaiyam","Srivilliputhur","Suratgarh","Gohana","Sirsa","Fatehabad","Nurpur","Chamba","Khergam","Dindigul","Pudukkottai","Kaimganj","Tarn Taran","Khanna","Irinjalakuda","Sehore","Parra","Dicholi","Chicalim","Saligao","Changanacheri","Igatpuri","Sangamner","Ganganagar","Kanhangad","Chidambaram","Chittur","Nilambur","Arvi","Jalesar","Kasganj","Chandausi","Beawar","Bharatpur","Kathua","Chalisgaon","Karamsad","Peranampattu","Arani","Payyanur","Pattambi","Pattukkottai","Pakala","Vikarabad","Bhatkal","Rupnarayanpur","Kulti","Koch Bihar","Nongstoin","Budbud","Balangir","Kharar","Mukerian","Mansa","Punalur","Mandya","Nandyal","Dhone","Candolim","Aldona","Solim","Daman","Koothanallur","Sojat","Alanallur","Kagal","Jhunjhunun","Sirhind","Kurali","Khinwara","Machhiwara","Talwandi Sabo","Malpur","Dhar","Medarametla","Pileru","Yercaud","Ottappalam","Alangulam","Palus","Chiplun","Durg","Damoh","Ambarnath","Haveri","Mundgod","Mandvi","Behala","Fort","Bela","Balana","Odhan","Mawana","Firozabad","Bichpuri","Almora","Pauri","Azamgarh","Phaphamau","Nongpoh","Gangrar","Jhalawar","Nathdwara","Jaisalmer","Pushkar","Sirohi","Baroda","Ambah","Ambejogai","Ambad","Osmanabad","Betalbatim","Gangapur","Dindori","Yeola","Pandharpur","Neri","Umred","Patelguda","Patancheru","Singarayakonda","Peddapuram","Gadag","ChikmagalÅ«r","Chikodi","Amer","Chintamani","Tambaram","Palayam","Karamadai","Omalur","Kuzhithurai","Faizabad","Thirumangalam","Kodaikanal","Devipattinam","Dharapuram","Rudrapur","Talcher","Haldia","Karsiyang","Sandur","Bapatla","Shamsabad","Kandi","Ramapuram","Anchal","Trimbak","Calangute","Arpora","Khargone","Mandla","Kalan","Pachmarhi","Dhamtari","Kumhari","Aundh","Tala","Tuljapur","Botad","Sidhpur","Sanand","Nagwa","Mussoorie","Vadamadurai","Sholavandan","Pochampalli","Perundurai","Lalgudi","Ponneri","Mount Abu","Vadner","Shanti Grama","Nalagarh","Pahalgam","Dinanagar","Jatani","Ganga","Barmer","Hoshangabad","Khajuraho Group of Monuments","Betul","Sangola","Tirumala","Mirza Murad","Attur","Budha","Pala","Tonk","Koni","Rajpur","Shrigonda","Hazaribagh","Nagaur","Mandapeta","Nabadwip","Nandurbar","Nazira","Kasia","Bargarh","Kollegal","Shahkot","Jagraon","Channapatna","Madurantakam","Kamalpur","Ranaghat","Mundra","Mashobra","Rama","Chirala","Bawana","Dhaka","Mahal","Chitradurga","Mandsaur","Dewas","Sachin","Andra","Kalkaji Devi","Pilkhuwa","Mehra","Chhachhrauli","Samastipur","Bangaon","Ghatal","Jayanti","Belgharia","Kamat","Dhariwal","Morinda","Kottagudem","Suriapet","Mahesh","Sirwani","Kanakpura","Mahajan","Sodhi","Chand","Nagal","Hong","Raju","Tikamgarh","Parel","Jaynagar","Mill","Khambhat","Ballabgarh","Begusarai","Shahapur","Banka","Golaghat","Palwal","Kalra","Chandan","Maru","Nanda","Chopra","Kasal","Rana","Chetan","Charu","Arora","Chhabra","Bishnupur","Manu","Karimganj","Ellora Caves","Adwani","Amreli","Soni","Sarwar","Balu","Rawal","Darsi","Nandigama","Mathan","Panchal","Jha Jha","Hira","Manna","Amal","Kheda","Abdul","Roshan","Bhandari","Binavas","Hari","Nandi","Rajapur","Suman","Sakri","Khalapur","Dangi","Thiruthani","Bawan","Basu","Kosamba","Medchal","Kakdwip","Kamalpura","Dogadda","Charan","Basirhat","Nagari","Kangayam","Sopara","Nadia","Mahulia","Alipur","Hamirpur","Fatehgarh","Bagh","Naini","Karari","Ajabpur","Jaunpur","Iglas","Pantnagar","Dwarahat","Dasna","Mithapur","Bali","Nilokheri","Kolayat","Haripur","Dang","Chhota Udepur","Matar","Sukma","Guna","Dona Paula","Navelim","Vainguinim","Curchorem","Balaghat","Bhagwan","Vijapur","Sinnar","Mangaon","Hadadi","Bobbili","Yanam","Udaigiri","Balanagar","Kanigiri","Muddanuru","Panruti","Proddatur","Puliyur","Perambalur","Turaiyur","Tiruchchendur","Shadnagar","Markal","Sultan","Rayagada","Kaniyambadi","Vandalur","Sangam","Katoya","Gudur","Farakka","Baramati","Tohana"]




function theAjax(uri,data){
 return $.ajax({
    type:"POST",
    dataType:"json",
    url: uri,
    data : data
 });
};
var y='<datalist id="citylist">';
for(var i=0;i<cities.length;i++)
{
   y+="<option value="+cities[i]+">";
}
y+="</datalist>"
// console.log(y);
$("#form-city").html(y);
jQuery(document).ready(function() {

    
     //$(".registration-form").hide();
    $("#not-registered").on("click",function(){
   $(".login-form").fadeOut(400,function(){
   $(".registration-form").fadeIn(); 
   });
   
    });
     $("#already-registered").on("click",function(){
      console.log("hi");
   $(".registration-form").fadeOut(400,function(){
   $(".login-form").fadeIn(); 
   });
   
    });

   $("#forgot-pass-submit").on("click",function(){
    var x=true;
    
      if($("#reset-email").val()=="")
      {

        $("#reset-email").css("border-color","#e45d5d");
        x=false;
      }     
      if(x)
      {
         console.log("forgot");
        x=membervalid($("#reset-email").val());
        console.log(x);
        if(!x)
        {
          $("#reset-emailerr").show();
        }  
      }
      if(x)
      {
        $("#forgot-pass-submit").html("Submitting...");
        data={
          "email" : $("#reset-email").val()
        }
        theAjax('/forgotPassword/',data)
        .done(function(response){
          console.log(response);
          if(response.status==0)
          {
           $("#forgot-pass-submit").html("Submit");
           $("#error-resetemail").html(response.error);
           $("#reset-message").show();
          }
          if(response.status==1)
          {
           $("#forgot-pass-submit").html("Submit");
           $("#error-resetemail").html("Reset link successfully sent"); 
           $("#reset-message").show();
          }
        })
      }

   });
  $("#reset-email").on("focus",function(){
    $("#reset-email").css("border-color","#ddd");
    $("#reset-message").hide();
  })





  $("#login-btn").on("click",function(){
    var x=true;
    console.log("i am here");
      if($("#login-id").val()=="")
      {
        $(".login-invalid").show();
          $("#login-id").css("border-color","#e45d5d");
        x=false;
      }
      else{
          $("#login-id").css("border-color","#ccc");
      }
      if($("#login-pass").val()=="")
      {
         $(".login-pass-invalid").show();
          $("#login-pass").css("border-color","#e45d5d");
         
          x=false; 

      }
      else{
          $("#login-pass").css("border-color","#ccc");

      }
       if(x)
       {
         x=(loginemailvalidation() || technexIdValidation())
         if(!x){
          $(".login-invalid").show();
          $("#login-id").css("border-color","#e45d5d");
         }
       }        
       if(x)
       {
        $("#login-id").css("border-color","#ccc");
        $("#login-pass").css("border-color","#ccc");
         $("#login-btn").html("Logging you in");
          data = {
            "email":$("#login-id").val(),
            "password":$("#login-pass").val(),
            "csrfmiddlewaretoken":$("input[name=csrfmiddlewaretoken]").val()
          }
          theAjax('/login/',data)
          .done(function(response){
            console.log(response);
            if(response.status==1)
            {
              window.location.assign("/dashboard/#/profile/");
            }
            if(response.status==0)
            {
               $("#login-btn").html("Login");
               $(".login-error").show();
            }
          })
       }

  });


















    
     $(".reset-emailerr").hide();

    $(".login-error").hide();

     $(".login-invalid").hide();
    $(".alert-email").hide();
    $(".alert-confirm-password").hide();
    $(".alert-mobile").hide();
    $('#close-confirm-password').on('click',function(){
      $('.alert-confirm-password').hide();
    });
     $('#close-email').on('click',function(){
      $('.alert-email').hide();
    });
      $('#close-email-repeat').on('click',function(){
      $('.alert-email').hide();
    });
     $('#close-mobile').on('click',function(){
      $('.alert-mobile').hide();
    }); 
      $('#close-no-referral').on('click',function(){
      $('.alert-email').hide();
    });
       $('#close-invalid-referral').on('click',function(){
      $('.alert-email').hide();
    });
   $('#close-login-invalid').on('click',function(){
      $('.login-invalid').hide();
    });
    $("#close-login-error").on('click',function(){
      $('.login-error').hide();

    })
    $("#close-reset-emailerr").on("click",function(){
      $(".reset-emailerr").hide();
    })



function phnvalidation()
    {
        var num = $('.form-mobile-number').val();

        console.log(num.length);
        if((num.length!==10) || (isNaN(parseInt(num))) || (parseInt(num).toString().length  != num.length))
           { 
            $('.alert-mobile').show();
            return false;
        }
        else
        {
           $('.alert-mobile').hide();
            return true;
        }
    }
    $.backstretch("/static/login2_files/1.jpg");
    
    $('#top-navbar-1').on('shown.bs.collapse', function(){
        $.backstretch("resize");
    });
    $('#top-navbar-1').on('hidden.bs.collapse', function(){
        $.backstretch("resize");
    });
function membervalid(data){
   var id=data.trim();
        var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      var email=re.test(id)
       return (email);  
        
    }

function technexIdValidation()
{
   var id=$("#login-id").val().trim();
    return id.length==7 && id.substring(0,2)=="TX" && !isNaN(parseInt(id.substring(2)));

}

        function loginemailvalidation()
    {

        var email = $('#login-id').val();
        var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
       
        if(re.test(email) == false)
        {
             $('#email-error').show();
             $('#laluram').css("border-color","#e45d5d");
             return false;
        }
        else
        { 
              $("#email-error").hide();
              $('#laluram').css("border-color","#ccc");
              return true;
        }
        
    }

    function emailvalidation()
    {

        var email = $('#laluram').val();
        var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
       
        if(re.test(email) == false)
        {
             $('#email-error').show();
             $('#laluram').css("border-color","#e45d5d");
             return false;
        }
        else
        { 
              $("#email-error").hide();
              $('#laluram').css("border-color","#ccc");
              return true;
        }
        
    }
     function referralemailvalidation()
    {

        var email = $('#referral-email').val();
        var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
       
        if(re.test(email) == false)
        {
             $('#invalid-referral').show();
             $('#laluram').css("border-color","#e45d5d");
             return false;
        }
        else
        { 
              $("#invalid-referral").hide();
              $('#laluram').css("border-color","#ccc");
              return true;
        }
        
    }

function validatePassword(){
        var password = document.getElementById("password");
        confirm_password = document.getElementById("confirm_password");

      if((password.value != confirm_password.value) || (password.value == "") || (confirm_password.value=="")) {
        $('.alert-confirm-password').show();
        $('#confirm_password').css("border-color","#e45d5d");
        return false;
      } else {
        $('.alert-confirm-password').hide();
        $("#confirm_password").css("border-color","#ccc");
        return true;
      }
    }                                    
    $('.registration-form fieldset:first-child').fadeIn('slow');
    
    $('.registration-form input[type="text"], .registration-form input[type="password"], .registration-form textarea, .registration-form select').on('focus', function() {
        $(this).css("border-color","#ccc");
    });
    $('.login-form input[type="text"], .registration-form input[type="password"], .registration-form textarea, .registration-form select').on('focus', function() {
        $(this).css("border-color","#ccc");
    });
    $('#btn-next').on('click', function() {
        var parent_fieldset = $(this).parents('fieldset');
        var next_step = true;
        
        parent_fieldset.find('input[type="text"], input[type="password"], textarea').each(function() {
            if( $(this).val() == "" ) {
                $(this).css("border-color","#e45d5d");
                next_step = false;
            }});
              if(next_step){
            next_step = emailvalidation() && validatePassword();
            next_step = validatePassword() && emailvalidation();
        }
        if(next_step)
        {
          function emailUnique(){
  var email = $("#laluram").val();
  theAjax('/checkEmail/',{"email":email}).done(function(response){
    if(response == '1') return true;
    else return false;
  })
};
          //next_step=emailUnique();
          //if(!next_step)
          var email = $("#laluram").val();
          theAjax('/checkEmail/',{"email":email}).done(function(response){
          if(response == '0') {$('#email-repeat').show();next_step = false;}
   
  if( next_step ) {

            parent_fieldset.fadeOut(400, function() {
                $(this).next().fadeIn();
                $($(this).next()).find('input[type="text"], input[type="password"], textarea, select').each(function()
                {
                $(this).css("border-color","#ccc");   
               });
            });
        }
  });
          //$('#email-repeat').show();

        }
        
        
        
    });


    $("input[type=checkbox]").on("click", function()
    {

         if($('#someSwitchOptionInfo').is(":checked"))
        {
          $("#referral-email").attr("disabled",false);
        }
        else
        {
          $("#referral-email").attr("disabled",true);
        }
    });       

        $('#btn-next-page-email').on('click', function() {
        var parent_fieldset = $(this).parents('fieldset');
        var next_step = true;        
        if( next_step ) {
            parent_fieldset.fadeOut(400, function() {
                $(this).next().fadeIn();
                $($(this).next()).find('input[type="text"], input[type="password"], textarea').each(function()
                {
                // $(this).css("border-color","#e45d5d");   
               });

            });
        }
        
    });

    
    $('.registration-form .btn-previous').on('click', function() {
        $(this).parents('fieldset').fadeOut(400, function() {
            $(this).prev().fadeIn();
        });
    });

    $('#form-mobile').keyup(function(e){
        var code = (e.keyCode ? e.keyCode : e.which);
        if(code !==13)
        $('.alert-mobile').hide();
    });

    $("#login-id").keyup(function(e){
         var code= (e.keyCode ? e.keyCode : e.which);
         if(code!=13)
         {
          $(".login-invalid").hide();
          $(".login-error").hide();
         }  

    });
    $("#reset-email").keyup(function(e){
         var code= (e.keyCode ? e.keyCode : e.which);
         if(code!=13)
         {
          $(".reset-emailerr").hide();
         }
    });

$("#login-pass").keyup(function(e){
         var code= (e.keyCode ? e.keyCode : e.which);
         if(code!=13)
         {
          $(".login-invalid").hide();
          $(".login-error").hide();
         }  

    });

$('#laluram').keyup(function(e){
    var code = (e.keyCode ? e.keyCode : e.which);
        if(code !==13)
          $('#email-error').hide();
        $('#email-repeat').hide();
    });
$('#confirm_password').keyup(function(e){
    var code = (e.keyCode ? e.keyCode : e.which);
        if(code !==13)
        {
          $('.alert-confirm-password').hide();
        } 
 });
$('#referral-email').keyup(function(e){
    var code = (e.keyCode ? e.keyCode : e.which);
        if(code !==13)
          $('#invalid-referral').hide();
        $('#no-referral').hide();
    });
$("input[type=checkbox]").on("click", function()
    {

         if($('#someSwitchOptionInfo').is(":checked"))
        {
          $("#form-new-college").attr("disabled",false);
          $("#form-college").attr("disabled",true);

        }
        else
        {
          $("#form-new-college").attr("disabled",true);
          $("#form-college").attr("disabled",false);
        }
    });       

$('#btn-next-page').on('click', function(e) {

        var parent_fieldset = $(this).parents('fieldset');
        var next_step = true;
        if($('#id_year option:selected').text() == "--Select Your Year--")
            {
              $("#id_year").css("border-color","#e45d5d");
              next_step =false;
            }
            else
                {
                    $("#id_year").css("border-color","#ccc");
                }   
        if($("#form-college").val() == "" && !($('#someSwitchOptionInfo').is(":checked")))
        {
          $(".select2-selection").css("border-color","#e45d5d");
          next_step = false;
        }
        else
        {
          $(".select2-selection").css("border-color","#ccc");
        }        
        
       parent_fieldset.find('input[type="text"], input[type="password"], textarea').each(function() {
            if( $(this).val() == "" && $(this).prop('disabled') != true) {
              
              e.preventDefault();
                $(this).css("border-color","#e45d5d");
                next_step = false;
            }});
             if(next_step)
             {
                var mb=phnvalidation();
                next_step = mb;
               }
               if(next_step)
               {
                  if($('#someSwitchOptionInfo').is(":checked"))
        {
          college = $("#form-new-college").val();

        }
        else
        {
          college = $("#form-college").val();
        }
                
                data = {
                  "name":$("#form-first-name").val(),
                  "email":$("#laluram").val(),
                  "password":$("#password").val(),
                  "college":college,
                  "year":$("#id_year").val(),
                  "city":$("#form-city").val(),
                  "mobileNumber":$("#form-mobile").val(),
                  "uid":$("#uid").val(),
                  "city":$("#form-city").val(),
                  "referral":$("#referral-email").val(),
                  "csrfmiddlewaretoken":$("input[name=csrfmiddlewaretoken]").val()
                };
                if(!$("#referral-email").prop("disabled")) data['referral'] = $("#referral-email").val();
                console.log(data);
                $("#btn-next-page").attr("disabled",true);

                $("#btn-next-page").html("Submitting!");

                theAjax('/register/',data).done(function(response){
                  if( response == '1') {
          //$(".fb-send-to-messenger").attr(
            //"data-ref",$("#laluram").val());
                      fbq('track', 'CompleteRegistration', {
                          value: 1.00,
                        currency: 'INR'
                                      });
          $("#personal").html('Hey ' + $("#form-first-name").val() + ', Thanks for becoming a part of Technex 19!<br>Checkout the <a href="/events"><u>Events</u></a> we have in store for you.  <br> And do not forget to verify your email.<br>See ya soon :)');
           parent_fieldset.fadeOut(400, function() {
            $(this).next().fadeIn();
            });

        }
        else{
          console.log(response); //yahan error dikhana hai
        }
                })
                .fail(function(){
                  $("#btn-next-page").attr("disabled",false);
                  $("#btn-next-page").html("SUBMIT");
                  alert("Error Registeration. Report error at tech@technex.in");
                });
                
               };
         
    });
});

